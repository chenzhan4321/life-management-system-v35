/* 移动端响应式布局优化 */

/* 移动端基础样式 */
@media screen and (max-width: 768px) {
    /* 全局容器 */
    .container {
        padding: 10px;
        max-width: 100%;
    }
    
    /* 导航栏移动端优化 */
    .navbar {
        border-radius: 0;
        padding: 15px;
        flex-direction: column;
        gap: 15px;
        position: sticky;
        top: 0;
        z-index: 1000;
        background: var(--bg-secondary, white);
    }
    
    .nav-brand {
        width: 100%;
        justify-content: center;
    }
    
    .nav-brand h1 {
        font-size: 20px;
    }
    
    .nav-stats {
        width: 100%;
        justify-content: space-around;
        border-top: 1px solid var(--border-color, #e0e0e0);
        padding-top: 10px;
    }
    
    .stat-item {
        flex: 1;
        text-align: center;
    }
    
    .stat-value {
        font-size: 16px;
    }
    
    /* AI输入区域 */
    .ai-input-section {
        border-radius: 0;
        margin: 10px 0;
        padding: 15px;
    }
    
    .ai-input-section h2 {
        font-size: 18px;
    }
    
    .input-hint {
        font-size: 12px;
    }
    
    textarea {
        min-height: 80px;
        font-size: 14px;
    }
    
    .input-actions {
        flex-direction: column;
        gap: 10px;
    }
    
    .btn {
        width: 100%;
        padding: 14px 20px !important;
        font-size: 14px !important;
        justify-content: center;
    }
    
    /* 手工快速添加栏 */
    .manual-input-section {
        border-radius: 0;
        margin: 10px 0;
        padding: 15px;
    }
    
    .manual-input-section h3 {
        font-size: 16px;
    }
    
    .manual-input-flex {
        flex-direction: column;
        gap: 10px;
    }
    
    .quick-task-input,
    .quick-task-select,
    .quick-task-number {
        width: 100%;
        padding: 12px;
        font-size: 14px;
    }
    
    .quick-add-btn {
        width: 100%;
    }
    
    /* 域仪表板 */
    .domain-dashboard {
        border-radius: 0;
        margin: 10px 0;
        padding: 15px;
    }
    
    .domain-dashboard h2 {
        font-size: 18px;
    }
    
    .domains-grid {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }
    
    .domain-card {
        padding: 15px;
        border-radius: 8px;
    }
    
    .domain-card h3 {
        font-size: 14px;
        margin-bottom: 10px;
    }
    
    /* 进度环缩小 */
    .progress-ring svg {
        width: 80px !important;
        height: 80px !important;
    }
    
    .progress-text .hours {
        font-size: 18px;
    }
    
    .progress-text .label {
        font-size: 10px;
    }
    
    /* 任务列表 */
    .tasks-section {
        border-radius: 0;
        margin: 10px 0;
        padding: 15px;
    }
    
    .section-header {
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
    }
    
    .section-header h2 {
        font-size: 18px;
    }
    
    .action-buttons {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
    }
    
    .action-buttons .btn {
        padding: 10px !important;
        font-size: 12px !important;
    }
    
    /* 任务项 */
    .task-item {
        padding: 12px;
        border-radius: 8px;
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .task-checkbox {
        position: absolute;
        top: 12px;
        left: 12px;
    }
    
    .task-content {
        padding-left: 30px;
    }
    
    .task-title {
        font-size: 14px;
        line-height: 1.4;
    }
    
    .task-meta {
        flex-wrap: wrap;
        gap: 8px;
        font-size: 11px;
    }
    
    .task-actions {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        padding-top: 8px;
        border-top: 1px solid var(--border-color, #e0e0e0);
    }
    
    .task-actions .btn {
        padding: 8px !important;
        font-size: 12px !important;
    }
    
    /* 任务操作按钮优化 */
    .btn-timer, .btn-danger {
        padding: 10px 16px !important;
        font-size: 13px !important;
    }
    
    /* 内联编辑 */
    .inline-edit-number {
        width: 50px;
        font-size: 11px;
    }
    
    .inline-edit-select,
    .inline-edit-time {
        font-size: 11px;
    }
    
    /* Toast提示位置 */
    .toast {
        bottom: 20px;
        right: 10px;
        left: 10px;
        font-size: 13px;
    }
    
    /* 主题切换器 */
    .theme-switcher {
        position: fixed;
        bottom: 20px;
        right: 20px;
        top: auto;
        padding: 8px;
        border-radius: 50px;
        background: var(--bg-secondary, white);
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    
    .theme-switcher label {
        display: none;
    }
    
    .theme-switcher select {
        padding: 4px 8px;
        font-size: 11px;
    }
    
    /* 隐藏桌面端元素 */
    .desktop-only {
        display: none !important;
    }
    
    /* 优化滚动 */
    body {
        -webkit-overflow-scrolling: touch;
    }
    
    /* 防止横向滚动 */
    * {
        max-width: 100vw;
        overflow-x: hidden;
    }
    
    /* 触摸优化 */
    button, .btn, input, select, textarea {
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
    }
}

/* 小屏手机特殊优化 */
@media screen and (max-width: 375px) {
    .domains-grid {
        grid-template-columns: 1fr;
    }
    
    .nav-brand h1 {
        font-size: 18px;
    }
    
    .progress-ring svg {
        width: 60px !important;
        height: 60px !important;
    }
    
    .progress-text .hours {
        font-size: 14px;
    }
    
    .task-item {
        padding: 10px;
    }
    
    .btn {
        padding: 12px 16px !important;
        font-size: 13px !important;
    }
}

/* 横屏模式优化 */
@media screen and (max-width: 768px) and (orientation: landscape) {
    .navbar {
        position: relative;
        flex-direction: row;
    }
    
    .domains-grid {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .action-buttons {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* PWA全屏模式优化 */
@media all and (display-mode: standalone) {
    body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
    }
    
    .navbar {
        padding-top: calc(15px + env(safe-area-inset-top));
    }
    
    .theme-switcher {
        bottom: calc(20px + env(safe-area-inset-bottom));
    }
}

/* 快捷键帮助弹窗移动端优化 */
@media screen and (max-width: 768px) {
    .shortcuts-help {
        width: 90%;
        max-width: none;
        max-height: 80vh;
        padding: 20px;
    }
    
    .shortcuts-help h3 {
        font-size: 18px;
    }
    
    .shortcut-item {
        padding: 8px;
        font-size: 12px;
    }
    
    .shortcut-key {
        padding: 3px 6px;
        font-size: 11px;
    }
}